services:
  # ðŸ“š DOCS (Documentation Site)
  docs:
    build:
      context: .
      dockerfile: services/docs/Dockerfile
    container_name: pocketcoder-docs
    ports:
      - "4321:4321"
    volumes:
      - ./services/docs:/app/docs
      - /app/docs/node_modules  # Don't mount node_modules - use container's installed version
      - ./services/pocketbase:/app/pocketbase
      - ./services/proxy:/app/proxy
      - ./DEVELOPMENT.md:/app/DEVELOPMENT.md:ro
      - ./SECURITY.md:/app/SECURITY.md:ro
      - ./scripts:/app/scripts:ro
    working_dir: /app/docs
    environment:
      - NODE_ENV=development
    command: /bin/bash -c "./sync.sh && npm run dev -- --host 0.0.0.0"
    restart: unless-stopped
    networks:
      - pocketcoder-dashboard

networks:
  pocketcoder-dashboard:
    external: true
