services:
  # ðŸ“š DOCS (Documentation Site)
  docs:
    build:
      context: .
      dockerfile: services/docs/Dockerfile
    container_name: pocketcoder-docs
    ports:
      - "4321:4321"
    volumes:
      - .:/app                                 # full project root (must be rw for CODEBASE.md and cargo target/)
      - ./services/docs:/app/docs              # docs source (writable for build output)
      - /app/docs/node_modules                 # keep container's node_modules
      - /app/docs/.astro                       # ditto for astro cache
    working_dir: /app/docs
    environment:
      - NODE_ENV=development
    command: /bin/bash -c "./sync.sh && npm run dev -- --host 0.0.0.0"
    restart: unless-stopped
    networks:
      - pocketcoder-dashboard

networks:
  pocketcoder-dashboard:
    external: true
